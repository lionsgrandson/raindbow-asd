import { useState, useEffect } from 'react'
import '../App.css'
import RecBox from './recBox'
import './recSec.css'

function RecSec() {
  const [startIndex, setStartIndex] = useState(0)

  const reviews = [
    {
      RevText:
        'â€×¡×™×•×Ÿ ×ž×œ×•×•×” ××•×ª×™ ×¢×•×“ ×©×”×ª×—×œ×ª×™ ×œ×”×ª× ×“×‘ ×‘×¦×‘× ×•××¤×™×œ×• ×§×¦×ª ×œ×¤× ×™. ×”×™× ×¢×–×¨×” ×œ×™ ×œ×”×‘×™×Ÿ ×™×•×ª×¨ ××ª ×”×¡×‘×™×‘×” ×•×œ×¢× ×•×ª ×‘×¦×•×¨×” ×ž×•×ª××ž×ª.\n\n×œ×ž×“×ª×™ ×ž×ž× ×” ×›×™×¦×“ ×œ×”×ª×ž×•×“×“ ×¢× ×¨×™×‘×•×™ ×ž×©×™×ž×•×ª ×•×œ×¢×‘×•×“ ×¢×œ ×”×œ×—×¥ ×©×œ×™ ×©×œ× ×™×©×¤×™×¢ ×•×™×¤×¨×§ ×œ×™ ××ª ×›×œ ×”×™×•×.\n\n×”×©×™×—×” ××™×ª×” ×¢×•×–×¨×ª ×œ×™ ×œ×”×‘×™×Ÿ ××ª ×”×™×—×¡×™× ×©×œ×™ ×ž×•×œ ×”×ž×©×¤×—×” ×œ×™ ×•×ž×•×œ ×”×—×‘×¨×™×. ×× ×™ ×™×•×“×¢ ×œ×”×ª×ž×•×“×“ ×¢× ×”×¨×‘×” ×™×•×ª×¨ ×“×‘×¨×™× ×”×™×•× ×‘×¦×•×¨×” ×ž××•×–× ×ª. â€œ',
      RevName: '×‘×•×’×¨ ×‘×Ÿ 23',
    },
    {
      RevText:
        'â€×¡×™×•×Ÿ ×”×’×™×¢×” ×œ×”×¢×‘×™×¨ ×œ× ×• ×”×¨×¦××” ×‘× ×•×©× ××•×˜×™×–× ×œ×¢×•×‘×“×™× ×©×œ× ×• ×©×™×© ×œ×”× ×™×œ×“×™× ×¢× ××•×˜×™×–×. ×”×™× × ×ª× ×” ×›×œ×™× ×¤×¨×§×˜×™×™× ×•×¢× ×ª×” ×œ×›×œ ×”×©××œ×•×ª ×©×¢×œ×• ×‘×¡×‘×œ× ×•×ª ×¨×‘×”.\n\n×”×”×•×¨×™× ×›×œ ×›×š ×©×ž×—×• ×¢×œ ×§×™×•× ×”×ž×¤×’×© ×•×”×™×›×•×œ×•×ª ×©×œ× ×• ×›×—×‘×¨×” ×œ×ª×ª ×œ×”× ×ž×¢× ×” ×•×œ×”×›×™×¨ ×‘×§×©×™×™× ×©×”× ×ž×ª×ž×•×“×“×™× ××™×ª×. ×¡×™×•×Ÿ ×™×¦×¨×” ×ž×§×•× ×‘×˜×•×— ×‘×ž×”×œ×š ×”×”×¨×¦××” ×©× ×ª×Ÿ ××¤×©×¨×•×ª ×œ×”×™×—×©×£ ×•×œ×”×¨×’×™×© ×—×œ×§ ×ž×§×”×™×œ×”.\n\n×ž×•×“×” ×œ×” ×¢×œ ×”×”×¨×¦××” ×”×ž×—×‘×¨×ª ×•×”×ž×’×©×¨×ª ×¢×‘×•×¨× ×•. â€œ',
      RevName: '×× ×•×© ×—×‘×¨×ª ×‘×™×˜×•×—',
    },
    // ×“×ž×• × ×•×¡×¤×™×...
    {
      RevText: 'â€×¡×™×•×Ÿ ×”×’×™×¢×” ×œ×”×¢×‘×™×¨ ×œ× ×• ×”×¨×¦××”...â€œ',
      RevName: '×¨×›×–×ª ×ž×©××‘×™ ×‘×™×˜×•×—',
    },
    {
      RevText: 'â€×¡×™×•×Ÿ ×™×¦×¨×” ×ž×§×•× ×‘×˜×•×—...â€œ',
      RevName: '×¨×›×–×ª ×ž×©××‘×™ ×× ×•×©',
    },
    {
      RevText: 'â€×¡×™×•×Ÿ ×”×’×™×¢×” ×œ×”×¢×‘×™×¨ ×œ× ×• ×”×¨×¦××”.×‘×™×¨ ×œ× ×• ×”×¨×¦××”...â€œ',
      RevName: '×¨×›×–×ª ×ž×©××‘×™ ×‘×™×˜×•×—',
    },
    {
      RevText: 'â€×¡×™×•×Ÿ ×™×¦×¨×” ×ž×§×•× ×‘×˜×•×—...â€œ',
      RevName: '×¨×›×–×ª ×ž×©××‘×™ ×× ×•×©',
    },
  ]

  // â© Go forward
  const handleNext = () => {
    setStartIndex((prev) => (prev + 2 < reviews.length ? prev + 2 : 0))
  }

  // âª Go back
  const handlePrev = () => {
    setStartIndex((prev) =>
      prev - 2 >= 0 ? prev - 2 : Math.max(0, reviews.length - 2)
    )
  }

  // ðŸŽ¬ Auto-slide forward every 3s
  useEffect(() => {
    const interval = setInterval(handleNext, 3000)
    return () => clearInterval(interval) // cleanup
  }, [reviews.length])

  return (
    <div className='RecSecDiv'>
      <button onClick={handlePrev} className='nextBtn'>
        â–¶
      </button>

      {reviews.slice(startIndex, startIndex + 2).map((review, index) => (
        <RecBox key={startIndex + index} {...review} />
      ))}

      <button onClick={handleNext} className='nextBtn'>
        â—€
      </button>
    </div>
  )
}

export default RecSec
